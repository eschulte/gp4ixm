<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>

<title>Distributed GP for IXM</title>
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2009-11-01 22:22:00 MST"/>
<meta name="author" content="Eric Schulte"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  p.verse { margin-left: 3% }
  pre {
	border: 1pt solid #AEBDCC;
	background-color: #232323;
	color: #E6E1DC;
	padding: 5pt;
	font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">
<h1 class="title">Distributed GP for IXM</h1>


<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#sec-1">Introduction </a></li>
<li><a href="#sec-2">Instillation </a></li>
<li><a href="#sec-3">Components </a>
<ul>
<li><a href="#collector">collector </a></li>
<li><a href="#scrutinizer">scrutinizer </a></li>
<li><a href="#evaluator">evaluator </a></li>
</ul>
</li>
<li><a href="#sec-4">Issues / Notes </a>
<ul>
<li><a href="#sec-4.1">new error code </a></li>
<li><a href="#sec-4.2">new segfaults&hellip; </a></li>
<li><a href="#sec-4.3">size overflow </a></li>
<li><a href="#sec-4.4">hard goals </a></li>
<li><a href="#sec-4.5">possibility of over-clocking the ixm w/alarms </a></li>
<li><a href="#sec-4.6">segfault (possibly crossover) </a></li>
</ul>
</li>
<li><a href="#sec-5">Experiments </a>
<ul>
<li><a href="#sec-5.1">first suite </a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">Introduction </h2>
<div class="outline-text-2" id="text-1">


<p>
Implementing Genetic Programming (GP) in a distributed manner for a
group of IXM boards.
</p>
<p>
links
</p><ul>
<li>
<a href="http://harvey.cs.unm.edu/robust/doku.php?id=projects:distributed_ga_for_ixm">project wiki page</a>
</li>
<li>
<a href="http://github.com/eschulte/gp4ixm">github code page</a>
</li>
<li>
<a href="http://eschulte.github.com/gp4ixm/gp4ixm.html">github project page</a>

</li>
</ul>
</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">Instillation </h2>
<div class="outline-text-2" id="text-2">

<p>use the following to grab a full copy of this repository
</p>


<pre class="src src-sh">git clone git://github.com/eschulte/gp4ixm.git
<span style="color: #D0D0FF;">cd</span> gp4ixm
git submodule init
git submodule update
</pre>




</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">Components </h2>
<div class="outline-text-2" id="text-3">


</div>

<div id="outline-container-collector" class="outline-3">
<h3 id="collector"><a name="sec-3.1" id="sec-3.1"></a>collector </h3>
<div class="outline-text-3" id="text-collector">

<p>This functionality is now extracted into a separate file
<code>collector.cpp</code> which can be included into a sketch as demonstrated in
<code>collector/sketch.pde</code> in the repository.
</p>
<p>
It can be used to report integers, strings, or doubles to a laptop or
central collector attached to a group of IXM boards.  Along with the
value boards will report their location in terms of the path taken
from the central collector to get to the board.  For example of path
of "rflf" mean from the board immediately next to the laptop go&hellip;
</p><ul>
<li>
out the right (from the laptop)
</li>
<li>
forward (straight through the board out the far face)
</li>
<li>
left (from the entering face)
</li>
<li>
forward

</li>
</ul>

<p>The boards need to be told where to report to before they will begin
their reports.  So to use this functionality you must first send a <code>c</code>
packet to your sketch containing an integer counter (boards will only
pay attention if the integer counter is greater than what they've
already seen).  So for example the following is the output of the
example sketch in <code>collector/sketch.pde</code>&hellip;
</p>



<pre class="example">c2                  # user input

c45                 # output from first board (no path)
c3.14
cschulte
c45 r               # output from board to the right of first board
c3.14 r
cschulte r
c45
c3.14
cschulte
c45 r
c3.14 r
cschulte r
</pre>




</div>

</div>

<div id="outline-container-scrutinizer" class="outline-3">
<h3 id="scrutinizer"><a name="sec-3.2" id="sec-3.2"></a>scrutinizer </h3>
<div class="outline-text-3" id="text-scrutinizer">

<p>The scrutinizer is a ruby script which uses <a href="http://github.com/mixonic/libixm">libixm</a> to monitor the
output of the <a href="#sec-3.1">collector</a> sketch.  It uses the output of the collector
to maintain a collection of data structures representing the reporting
boards in the group.  Each board holds the following information
</p>


<pre class="src src-ruby"><span style="color: #BC9458; font-style: italic;"># </span><span style="color: #BC9458; font-style: italic;">An ixm board with location and value
</span><span style="color: #CC7833;">class</span> <span style="color: #ffffff;">Board</span>
  attr_accessor <span style="color: #6D9CBE;">:location</span>, <span style="color: #6D9CBE;">:value</span>, <span style="color: #6D9CBE;">:cords</span>
</pre>



<p>
where <code>location</code> is the location of the board in terms of turns, as
reported form the ixms (e.g. "flrfflf"), <code>value</code> is a scalar value
reported by the board, and <code>cords</code> is the 2D coordinates of the board
with the laptop/usb-cord positioned at the origin.
</p>
<p>
The scrutinizer can generate 3D graphs of the data collected form the
boards using <a href="http://www.gnuplot.info/">gnuplot</a>.
</p>

</div>

<div id="outline-container-3.2.1" class="outline-4">
<h4 id="sec-3.2.1">usage </h4>
<div class="outline-text-4" id="text-3.2.1">

<p>to run the scrutinizer
</p><ol>
<li>
be sure that you have built the collector sketch



<pre class="src src-sh"><span style="color: #D0D0FF;">cd</span> collector
make

</pre>



</li>
<li>
then run the scrutinizer



<pre class="src src-sh">ruby scrutinizer.rb

</pre>



<p>
which should result in the following output to your terminal
</p>


<pre class="example">initializing ixm connection
creating board group
telling boards I am here [24]
got packet "c6 f"
2
Warning: empty x range [0:0], adjusting to [-1:1]
got packet "c111 fl"
4
got packet "c81 fr"
6
got packet "c20 fll"
6
got packet "c16 f"
6
got packet "c94 fl"
6
...
</pre>



<p>
and which will also begin creating images in <code>/tmp/scrutinizer/</code>
</p></li>
<li>
to generate an animation of the images output by the scrutinizer
try to following command (which uses <a href="http://www.imagemagick.org/script/index.php">imagemagick</a>)



<pre class="src src-sh"><span style="color: #D0D0FF;">cd</span> /tmp/scrutinizer
convert -delay 20 -loop 1 group.*.png group.gif

</pre>



<p>
the resulting <code>group.gif</code>, should look something like the following
<img src="data/group.gif"  alt="data/group.gif" />
</p>
</li>
</ol>
</div>
</div>

</div>

<div id="outline-container-evaluator" class="outline-3">
<h3 id="evaluator"><a name="sec-3.3" id="sec-3.3"></a>evaluator </h3>
<div class="outline-text-3" id="text-evaluator">

<p>This sketch allows boards to evaluate strings of integers and
operators (<code>+</code>, <code>-</code>, <code>*</code>, <code>/</code>) on board using reverse polish notation.
</p>
</div>
</div>

</div>

<div id="outline-container-4" class="outline-2">
<h2 id="sec-4">Issues / Notes </h2>
<div class="outline-text-2" id="text-4">


</div>

<div id="outline-container-4.1" class="outline-3">
<h3 id="sec-4.1">new error code </h3>
<div class="outline-text-3" id="text-4.1">

<p>after running multiple experiments with libixm, I've managed to
uncover a new error code&hellip;
</p>
<pre class="example">
1 red, 5 green, 6 blue
</pre>


<p>
which means&hellip;
</p>
<pre class="example">
/**&lt; Failed to create an alarm when needed */
</pre>


<p>
this should hopefully be fixed now&hellip;
</p>
</div>

</div>

<div id="outline-container-4.2" class="outline-3">
<h3 id="sec-4.2">new segfaults&hellip; </h3>
<div class="outline-text-3" id="text-4.2">

<p>this is the pre-fault output
</p>


<pre class="example">L 
L 6 second on xxxx***
L best fitness is 9965
L mean fitness is 14188.25
L best individual is 10 long and is 9x9+x92+**
i 9x9+x9x99x*x*
i 9x*x9+x+x92+**
i 9x9+x*2++x*
i 9x9+x9x99x*x*
i 9x9x9+x*2++x*
i 9x9+x9xx992+**
L 
L 7 second on xxxx***
L best fitness is 2892
L mean fitness is 12357.34
L best individual is 13 long and is 9x7+x9x9*x*x*
i 9x9x9+x*2++x*
i 9x9+x9x99x9+x+x92+**
i 9x9+x9x99x9+x+x92+**
i 9x9x9+x+xx9*x*x*
i 9x7+*9499**x*
i 9x9+x9x99x98x*2++x9*x*x*L
L 
L 8 second on xxxx***
L best fitness is 2892
L mean fitness is 9667.04
L best individual is 26 long and is 9x9+x9x99x9+x*2++x9*x*x*L
i 9x9+x9x99x9+x*2++x9*x*x*L
i 9x9+x9x99x9+x*2++x9*x*x*L
i 9x9+x9x99x9+x*2++x9*x*x*L
Ln Sun Nov  1 16:00:10 2009 [North baud rate set to 9600]
</pre>




<p>
more careful maintenance of individuals seems to have fixed this issue
</p>
</div>

</div>

<div id="outline-container-4.3" class="outline-3">
<h3 id="sec-4.3">size overflow </h3>
<div class="outline-text-3" id="text-4.3">

<p>It looks like passing individuals by value rather than by reference is
overflowing the chips.  begin to change to passing by reference.
</p>
</div>

</div>

<div id="outline-container-4.4" class="outline-3">
<h3 id="sec-4.4">hard goals </h3>
<div class="outline-text-3" id="text-4.4">


<table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="right" /><col align="left" /><col align="left" />
</colgroup>
<thead>
<tr><th scope="col">goal</th><th scope="col">best fitness</th><th scope="col">after</th><th scope="col">meaning</th></tr>
</thead>
<tbody>
<tr><td>g 9x8x7x6x5**++*-*</td><td>474</td><td></td><td>x(x(30x + x + 7) - 8)</td></tr>
<tr><td>g 999xxx*****</td><td>0</td><td>19 seconds</td><td>729x<sup>3</sup></td></tr>
</tbody>
</table>


</div>

</div>

<div id="outline-container-4.5" class="outline-3">
<h3 id="sec-4.5">possibility of over-clocking the ixm w/alarms </h3>
<div class="outline-text-3" id="text-4.5">

<p>this is currently handled by checking before every alarm is set and
when trying to set an alarm in the past, it instead sets it for a
second in the future.
</p>
<p>
currently this only happens when a new goal is being processed (which
makes sense, because that triggers a re-evaluation of every individual
in the population)
</p>
</div>

</div>

<div id="outline-container-4.6" class="outline-3">
<h3 id="sec-4.6"><span class="done DONE"> DONE</span> segfault (possibly crossover) </h3>
<div class="outline-text-3" id="text-4.6">


<p>
problem is in segfault, but it may not be noticed unless there are
large goals
</p>
<p>
we're copying past the end of our strings&hellip;
</p>
<p>
checking for end-of-string characters seems to help.
</p>

</div>

<div id="outline-container-4.6.1" class="outline-4">
<h4 id="sec-4.6.1">initial </h4>
<div class="outline-text-4" id="text-4.6.1">

<p>at commit 36b2f62205e6b1564987d819aee282319664543a
</p>
<p>
still segfaulting, but seems to be caused by large goals, as show in
this example output
</p>


<pre class="example">34 second on xxxx***
best fitness is 0
mean fitness is 153.19
best individual is 14 long and is 8+**8xx*x1/x**
g 9x8x7x6x5**++*-*
new goal is 9x8x7x6x5**++*-*
 
1 second on 9x8x7x6x5**++*-*
best fitness is 64410
mean fitness is 74313.37
best individual is 14 long and is 81**8xx*-1/x**
 
2 second on 9x8x7x6x5**++*-*
best fitness is 64125
mean fitness is 64353.00
best individual is 8 long and is xx*-1/1*
 
3 second on 9x8x7x6x5**++*-*
best fitness is 61966
mean fitness is 64070.36
best individual is 17 long and is 311*88**8-x*-1/1*
 
4 second on 9x8x7x6x5**++*-*
best fitness is 61641
mean fitness is 63532.51
best individual is 17 long and is 811*8-23xx8*-1/9*
 
5 second on 9x8x7x6x5**++*-*
best fitness is 47562
mean fitness is 61740.08
best individual is 17 long and is 311788**8-x*-1/1*
 
6 second on 9x8x7x6x5**++*-*
best fitness is 41028
mean fitness is 57034.68
best individual is 17 long and is 315788**8-x*-1/5*
 
7 second on 9x8x7x6x5**++*-*
Ln Mon Oct 26 18:02:06 2009 [North baud rate set to 9600]
  C-c C-c%                                                                                                          
$
</pre>




</div>

</div>

<div id="outline-container-4.6.2" class="outline-4">
<h4 id="sec-4.6.2">does it segfault w/crossover commented out? </h4>
<div class="outline-text-4" id="text-4.6.2">

<p>It seems that with crossover commented out, there is no possibility of
segfault.
</p>
</div>
</div>
</div>

</div>

<div id="outline-container-5" class="outline-2">
<h2 id="sec-5">Experiments </h2>
<div class="outline-text-2" id="text-5">


</div>

<div id="outline-container-5.1" class="outline-3">
<h3 id="sec-5.1">first suite </h3>
<div class="outline-text-3" id="text-5.1">

<p>5 runs each of the following goals
</p><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="left" /><col align="left" /><col align="left" />
</colgroup>
<tbody>
<tr><td>"xx*"</td><td>"xxx**"</td><td>"7xx*+"</td><td>"987xxx*-+*+"</td></tr>
</tbody>
</table>


<p>
over all combinations of the following parameters
</p><table border="2" cellspacing="0" cellpadding="6" rules="groups" frame="hsides">
<caption></caption>
<colgroup><col align="left" /><col align="left" />
</colgroup>
<thead>
<tr><th scope="col">GP parameter</th><th scope="col">different values (normally milliseconds per execution)</th></tr>
</thead>
<tbody>
<tr><td>mutation</td><td>(0 10)</td></tr>
<tr><td>breeding</td><td>(0 10)</td></tr>
<tr><td>injection</td><td>(0 10)</td></tr>
<tr><td>tournament size</td><td>(100 4 1)</td></tr>
</tbody>
</table>


<p>
resulting in 420 total runs &ndash; after removing those runs where mutation,
breeding and injection are all 0
</p>

</div>
</div>
</div>
<div class="clear-fix"></div>
<div id="doc-info">
  This document is created
  using <a href="http://orgmode.org/">Org-mode</a>
  and <a href="http://orgmode.org/worg/org-contrib/babel/org-babel.php">Org-babel</a>.
  The original plain-text document is available
  at <a href="gp4ixm.org">gp4ixm.org</a>
  (<a href="gp4ixm.org.html" title="how this document looks from inside Emacs">preview</a>).
</div>
</div>
</body>
</html>
