<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<!-- Created by htmlize-1.36 in css mode. -->
<html>
  <head>
    <title>gp4ixm.org</title>
    <style type="text/css">
    <!--
      body {
        color: #E6E1DC;
        background-color: #232323;
      }
      .comment {
        /* font-lock-comment-face */
        color: #BC9458;
        font-style: italic;
      }
      .org-block {
        /* org-block */
        color: #b3b3b3;
      }
      .org-code {
        /* org-code */
        color: #b3b3b3;
      }
      .org-done {
        /* org-done */
        color: #98fb98;
        font-weight: bold;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #FFC66D;
      }
      .org-level-2 {
        /* org-level-2 */
        color: #b0c4de;
      }
      .org-level-3 {
        /* org-level-3 */
        color: #CC7833;
      }
      .org-link {
        /* org-link */
        color: #00ffff;
        text-decoration: underline;
      }
      .org-meta-line {
        /* org-meta-line */
        color: #BC9458;
        font-style: italic;
      }
      .org-property-value {
      }
      .org-special-keyword {
        /* org-special-keyword */
        color: #ffa07a;
      }
      .org-table {
        /* org-table */
        color: #87cefa;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
  </head>
  <body>
    <pre>
<span class="comment"># -*- mode: org -*-</span>
<span class="org-meta-line">#+TITLE: Distributed GP for IXM</span>
<span class="org-meta-line">#+OPTIONS: num:nil ^:t toc:2</span>
<span class="org-meta-line">#+LaTeX_CLASS: normal</span>

<span class="org-level-1">* Introduction</span>

Implementing Genetic Programming (GP) in a distributed manner for a
group of IXM boards.

links
- <span class="org-link">project wiki page</span>
- <span class="org-link">github code page</span>
- <span class="org-link">github project page</span>

<span class="org-level-1">* Instillation</span>
use the following to grab a full copy of this repository
<span class="org-meta-line">#+begin_src sh
</span><span class="org-block">  git clone git://github.com/eschulte/gp4ixm.git
  cd gp4ixm
  git submodule init
  git submodule update</span><span class="org-meta-line">
#+end_src</span>

<span class="org-level-1">* Components</span>
<span class="org-level-2">** collector</span>
<span class="org-special-keyword">  :PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">collector</span>
<span class="org-special-keyword">  :END:</span>
This functionality is now extracted into a separate file
<span class="org-code">=collector.cpp=</span> which can be included into a sketch as demonstrated in
<span class="org-code">=collector/sketch.pde=</span> in the repository.

It can be used to report integers, strings, or doubles to a laptop or
central collector attached to a group of IXM boards.  Along with the
value boards will report their location in terms of the path taken
from the central collector to get to the board.  For example of path
of "rflf" mean from the board immediately next to the laptop go...
- out the right (from the laptop)
- forward (straight through the board out the far face)
- left (from the entering face)
- forward

The boards need to be told where to report to before they will begin
their reports.  So to use this functionality you must first send a <span class="org-code">=c=</span>
packet to your sketch containing an integer counter (boards will only
pay attention if the integer counter is greater than what they've
already seen).  So for example the following is the output of the
example sketch in <span class="org-code">=collector/sketch.pde=</span>...

<span class="org-meta-line">#+begin_example 
</span><span class="org-block">  c2                  # user input

  c45                 # output from first board (no path)
  c3.14
  cschulte
  c45 r               # output from board to the right of first board
  c3.14 r
  cschulte r
  c45
  c3.14
  cschulte
  c45 r
  c3.14 r
  cschulte r</span><span class="org-meta-line">
#+end_example</span>

<span class="org-level-2">** scrutinizer</span>
<span class="org-special-keyword">  :PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">scrutinizer</span>
<span class="org-special-keyword">  :END:</span>
The scrutinizer is a ruby script which uses <span class="org-link">libixm</span> to monitor the
output of the <span class="org-link">collector</span> sketch.  It uses the output of the collector
to maintain a collection of data structures representing the reporting
boards in the group.  Each board holds the following information
<span class="org-meta-line">#+begin_src ruby
</span><span class="org-block">  # An ixm board with location and value
  class Board
    attr_accessor :location, :value, :cords</span><span class="org-meta-line">
#+end_src</span>
where <span class="org-code">=location=</span> is the location of the board in terms of turns, as
reported form the ixms (e.g. "flrfflf"), <span class="org-code">=value=</span> is a scalar value
reported by the board, and <span class="org-code">=cords=</span> is the 2D coordinates of the board
with the laptop/usb-cord positioned at the origin.

The scrutinizer can generate 3D graphs of the data collected form the
boards using <span class="org-link">gnuplot</span>.

<span class="org-level-3">*** usage</span>
to run the scrutinizer
1) be sure that you have built the collector sketch
<span class="org-meta-line">   #+begin_src sh
</span><span class="org-block">     cd collector
     make</span><span class="org-meta-line">
   #+end_src</span>
2) then run the scrutinizer
<span class="org-meta-line">   #+begin_src sh
</span><span class="org-block">     ruby scrutinizer.rb</span><span class="org-meta-line">
   #+end_src</span>
   which should result in the following output to your terminal
<span class="org-meta-line">   #+begin_example 
</span><span class="org-block">     initializing ixm connection
     creating board group
     telling boards I am here [24]
     got packet "c6 f"
     2
     Warning: empty x range [0:0], adjusting to [-1:1]
     got packet "c111 fl"
     4
     got packet "c81 fr"
     6
     got packet "c20 fll"
     6
     got packet "c16 f"
     6
     got packet "c94 fl"
     6
     ...</span><span class="org-meta-line">
   #+end_example</span>
   and which will also begin creating images in <span class="org-code">=/tmp/scrutinizer/=</span>
3) to generate an animation of the images output by the scrutinizer
   try to following command (which uses <span class="org-link">imagemagick</span>)
<span class="org-meta-line">   #+begin_src sh
</span><span class="org-block">     cd /tmp/scrutinizer
     convert -delay 20 -loop 1 group.*.png group.gif</span><span class="org-meta-line">
   #+end_src</span>
   the resulting <span class="org-code">=group.gif=</span>, should look something like the following
   <span class="org-link">file:data/group.gif</span>

<span class="org-level-2">** evaluator</span>
<span class="org-special-keyword">  :PROPERTIES:</span>
  <span class="org-special-keyword">:CUSTOM_ID:</span> <span class="org-property-value">evaluator</span>
<span class="org-special-keyword">  :END:</span>
This sketch allows boards to evaluate strings of integers and
operators (<span class="org-code">=+=</span>, <span class="org-code">=-=</span>, <span class="org-code">=*=</span>, <span class="org-code">=/=</span>) on board using reverse polish notation.

<span class="org-level-1">* Issues / Notes</span>
<span class="org-level-2">** new error code</span>
after running multiple experiments with libixm, I've managed to
uncover a new error code...

<span class="org-code">: 1 red, 5 green, 6 blue
</span>
which means...

<span class="org-code">: /**&lt; Failed to create an alarm when needed */
</span>
this should hopefully be fixed now...

<span class="org-level-2">** new segfaults...</span>
this is the pre-fault output
<span class="org-meta-line">#+begin_example 
</span><span class="org-block">  L 
  L 6 second on xxxx***
  L best fitness is 9965
  L mean fitness is 14188.25
  L best individual is 10 long and is 9x9+x92+**
  i 9x9+x9x99x*x*
  i 9x*x9+x+x92+**
  i 9x9+x*2++x*
  i 9x9+x9x99x*x*
  i 9x9x9+x*2++x*
  i 9x9+x9xx992+**
  L 
  L 7 second on xxxx***
  L best fitness is 2892
  L mean fitness is 12357.34
  L best individual is 13 long and is 9x7+x9x9*x*x*
  i 9x9x9+x*2++x*
  i 9x9+x9x99x9+x+x92+**
  i 9x9+x9x99x9+x+x92+**
  i 9x9x9+x+xx9*x*x*
  i 9x7+*9499**x*
  i 9x9+x9x99x98x*2++x9*x*x*L&#11;
  L 
  L 8 second on xxxx***
  L best fitness is 2892
  L mean fitness is 9667.04
  L best individual is 26 long and is 9x9+x9x99x9+x*2++x9*x*x*L&#11;
  i 9x9+x9x99x9+x*2++x9*x*x*L&#11;
  i 9x9+x9x99x9+x*2++x9*x*x*L&#11;
  i 9x9+x9x99x9+x*2++x9*x*x*L&#11;
  Ln Sun Nov  1 16:00:10 2009 [North baud rate set to 9600]</span><span class="org-meta-line">
#+end_example</span>

more careful maintenance of individuals seems to have fixed this issue

<span class="org-level-2">** size overflow</span>
It looks like passing individuals by value rather than by reference is
overflowing the chips.  begin to change to passing by reference.

<span class="org-level-2">** hard goals</span>

<span class="org-table">| goal               | best fitness | after      | meaning               |</span>
<span class="org-table">|--------------------+--------------+------------+-----------------------|</span>
<span class="org-table">| g 9x8x7x6x5**++*-* |          474 |            | x(x(30x + x + 7) - 8) |</span>
<span class="org-table">| g 999xxx*****      |            0 | 19 seconds | 729x^3                |</span>
<span class="org-table">|                    |              |            |                       |</span>

<span class="org-level-2">** possibility of over-clocking the ixm w/alarms</span>
this is currently handled by checking before every alarm is set and
when trying to set an alarm in the past, it instead sets it for a
second in the future.

currently this only happens when a new goal is being processed (which
makes sense, because that triggers a re-evaluation of every individual
in the population)
  
<span class="org-level-2">** </span><span class="org-done">DONE</span><span class="org-level-2"> segfault (possibly crossover)</span>

problem is in segfault, but it may not be noticed unless there are
large goals

we're copying past the end of our strings...

checking for end-of-string characters seems to help.

<span class="org-level-3">*** initial</span>
at commit 36b2f62205e6b1564987d819aee282319664543a

still segfaulting, but seems to be caused by large goals, as show in
this example output
<span class="org-meta-line">#+begin_example 
</span><span class="org-block">34 second on xxxx***
best fitness is 0
mean fitness is 153.19
best individual is 14 long and is 8+**8xx*x1/x**
g 9x8x7x6x5**++*-*
new goal is 9x8x7x6x5**++*-*
 
1 second on 9x8x7x6x5**++*-*
best fitness is 64410
mean fitness is 74313.37
best individual is 14 long and is 81**8xx*-1/x**
 
2 second on 9x8x7x6x5**++*-*
best fitness is 64125
mean fitness is 64353.00
best individual is 8 long and is xx*-1/1*
 
3 second on 9x8x7x6x5**++*-*
best fitness is 61966
mean fitness is 64070.36
best individual is 17 long and is 311*88**8-x*-1/1*
 
4 second on 9x8x7x6x5**++*-*
best fitness is 61641
mean fitness is 63532.51
best individual is 17 long and is 811*8-23xx8*-1/9*
 
5 second on 9x8x7x6x5**++*-*
best fitness is 47562
mean fitness is 61740.08
best individual is 17 long and is 311788**8-x*-1/1*
 
6 second on 9x8x7x6x5**++*-*
best fitness is 41028
mean fitness is 57034.68
best individual is 17 long and is 315788**8-x*-1/5*
 
7 second on 9x8x7x6x5**++*-*
Ln Mon Oct 26 18:02:06 2009 [North baud rate set to 9600]
  C-c C-c%                                                                                                          
$</span><span class="org-meta-line">
#+end_example</span>

<span class="org-level-3">*** does it segfault w/crossover commented out?</span>
It seems that with crossover commented out, there is no possibility of
segfault.

<span class="org-level-1">* Experiments</span>
<span class="org-level-2">** first set</span>
solving x^3 with a variety of different GP parameters


</pre>
  </body>
</html>
